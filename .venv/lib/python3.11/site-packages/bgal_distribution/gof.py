import numpy as np
from scipy.stats import anderson_ksamp

def anderson_darling_test(dist, data, X_data=None):
    """
    Perform Anderson-Darling test for goodness of fit.

    Parameters:
    dist: BGALDistribution object, fitted to the data.
    data: numpy array, the data to test.
    X_data: numpy array, the X data used for generating random samples.

    Returns:
     Anderson-Darling statistic and p-value.
    """
    if X_data is None:
        samples1 = dist.rvs(len(data))
        samples2 = data
    else:
        samples1 = dist.rvs(len(data), X_data=X_data)
        samples2 = data

    result = anderson_ksamp([samples1, samples2])
    return result.statistic, result.significance_level
